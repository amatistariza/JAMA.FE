<app-navbar-admin></app-navbar-admin>

<div class="container mt-4">
    <div class="card" id="reporteDatosSection">
        <div class="card-body">
            <div class="print-header">
                <img src="assets/Logo.png" alt="Logo" class="logo">
                <h2 class="text-center mb-4">Reporte de Datos Unificados</h2>
            </div>

            <div class="table-responsive" style="max-height: 100%; overflow-y: auto;">
                <div class="mb-3 no-print">
                    <label for="mesSelect" class="form-label">Filtrar por mes</label>
                    <select id="mesSelect" class="form-control" (change)="onMesChange($event.target.value)">
                        <option value="">Todos</option>
                        <option *ngFor="let m of mesesDisponibles" [value]="m.value">{{ m.label }}</option>
                    </select>
                </div>

                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>CATEGOR√çA</th>
                            <th *ngFor="let vacuna of columnasVacunas">{{ vacuna }}</th>
                            <th>TOTAL</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let dato of datosUnificados"
                            [class.seccion-row]="dato.esSeccion"
                            [class.total-row]="dato.esTotal"
                            [style.backgroundColor]="dato.colorFondo">
                            <td><strong>{{ dato.categoria }}</strong></td>
                            <ng-container *ngIf="!dato.esSeccion">
                                <td *ngFor="let v of dato.valores">{{ v }}</td>
                                <td><strong>{{ dato.total }}</strong></td>
                            </ng-container>
                            <ng-container *ngIf="dato.esSeccion">
                                <td [attr.colspan]="columnasVacunas.length + 1"></td>
                            </ng-container>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="text-center mt-3 no-print">
                <button class="btn btn-success" (click)="imprimir()">
                    <i class="bi bi-printer-fill"></i> Imprimir / Exportar PDF
                </button>
            </div>
        </div>
    </div>
</div>
